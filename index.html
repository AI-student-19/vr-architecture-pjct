<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Architecture Walkthrough</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #a0a0a0"> <!-- Changed to neutral gray -->
      
      <!-- SKY (optional) -->
      <a-sky color="#888"></a-sky> <!-- Adds ambient sky to reduce brightness -->

      <!-- Lighting -->
      <a-entity light="type: ambient; color: #666; intensity: 0.5"></a-entity> <!-- Softer light -->
      <a-entity light="type: directional; color: #ffffff; intensity: 0.7" position="5 10 7"></a-entity> <!-- Warm light source -->

      <!-- Ground -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#999999" shadow></a-plane>

      <!-- Camera rig with walking + mouse -->
      <a-entity id="rig" position="0 1.6 0">
  <a-entity id="camera" camera look-controls wasd-controls></a-entity>
</a-entity>

<script>
  AFRAME.registerComponent('gaze-walk', {
    tick: function () {
      var rig = document.querySelector('#rig');
      var camera = document.querySelector('#camera');
      var direction = new THREE.Vector3();

      camera.object3D.getWorldDirection(direction);

      // Only move forward if looking mostly straight
      if (Math.abs(direction.y) < 0.3) {
        rig.object3D.position.x += direction.x * 0.05;
        rig.object3D.position.z += direction.z * 0.05;
      }
    }
  });
</script>

<a-entity gaze-walk></a-entity>

      <!-- GLB house model -->
      <a-entity 
        gltf-model="vr-house.glb" 
        position="0 0 0" 
        scale="1 1 1"
        material="color: #ccc"   
        shadow="cast: true; receive: true">
      </a-entity>

    </a-scene>
  </body>
</html>
